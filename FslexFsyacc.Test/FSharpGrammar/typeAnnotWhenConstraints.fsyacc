%{%}
typeAnnotWhenConstraints :
    | typeAnnot {}
    | typeAnnot when typeAnnotConstraints {}
typeAnnot :
    | tupleTypeAnnot "->" typeAnnot {}
    | tupleTypeAnnot {}
tupleTypeAnnot :
    | appTypeAnnot "*" tupleTypeAnnot {}
    | appTypeAnnot {}
appTypeAnnot :
    | appTypeAnnot "[" ","* "]" {}
    | appTypeAnnot appTypeAnnotContainer {}
    | atomTypeAnnot {}
    | typeParam ":>" typeAnnot {}
    | "_" ":>" typeAnnot {}
appTypeAnnotContainer :
    | longIdent {}
    | typeParam {}
typeParam :
    | "'" IDENT {}
    | "^" IDENT {}
atomTypeAnnot :
    | "#" atomTypeAnnot {}
    | appTypeAnnotContainer {}
    | "_" {}
    | "(" typeAnnot ")" {}
    | struct "(" tupleTypeAnnot ")" {}
    | appTypeAnnotContainer typeAnnotArgsActual {}
    | atomTypeAnnot "." longIdent {}
    | atomTypeAnnot "." longIdent typeAnnotArgsActual {}
    | anonRecdTypeAnnot {}
    | struct anonRecdTypeAnnot {}

typeAnnotArgsActual :
    | "<" typeAnnotArguments ">" {}
    | "<" ">" {}
typeAnnotArguments :
    | typeAnnotArguments "," typeAnnot {}
    | typeAnnot {}
anonRecdTypeAnnot :
    | braceBarFieldDeclListCoreAnnot {}
braceBarFieldDeclListCoreAnnot :
    | "{|" recdFieldDeclAnnotList "|}" {}
recdFieldDeclAnnotList :
    | recdFieldDeclAnnot ";" recdFieldDeclAnnotList {}
    | recdFieldDeclAnnot ";"? {}
recdFieldDeclAnnot :
    |  fieldDeclAnnot {}
fieldDeclAnnot :
    | IDENT ":" typeAnnot {}
typeAnnotConstraints :
    | typeAnnotConstraints and typeAnnotConstraint {}
    | typeAnnotConstraint {}
typeAnnotConstraint :
    | typeParam ":>" typeAnnot {}
    | typeParam ":" null {}
    | typeParam ":" "(" memberSignatureConstraint ")" {}
    | "(" appTypeAnnotAlts ")" ":" "(" memberSignatureConstraint ")" {}
    | typeParam ":" struct {}
    | typeParam ":" not struct {}
    | default typeParam ":" typeAnnot {}
    | typeParam ":" delegate typeAnnotArgsActual {}
    | typeParam ":" IDENT typeAnnotArgsActual {}
    | typeParam ":" IDENT {}
    | appTypeAnnot {}
memberSignatureConstraint :
    | static? member memberSigName ":" typeAnnot {}
    | new ":" typeAnnot {}
memberSigName :
    | IDENT {}
    | memberSigOpName {}
memberSigOpName :
    | "(" operatorName ")" {}
    | "(*)" {}
appTypeAnnotAlts :
    | appTypeAnnotAlts or appTypeAnnot {}
    | appTypeAnnot {}
longIdent :
    | IDENT {}
    | longIdent "." IDENT {}
